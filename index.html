<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Êó•Â∏∏ËÆ∞ÂΩï</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/responsive.css">
</head>
<body>
    <div class="app-container">
        <!-- È°∂ÈÉ®ÂØºËà™ -->
        <header class="app-header">
            <h1 class="app-title">Êó•Â∏∏ËÆ∞ÂΩï</h1>
            <nav class="app-nav">
                <button id="diary-tab" class="nav-btn active">Êó•ËÆ∞</button>
                <button id="plan-tab" class="nav-btn">ËÆ°Âàí</button>
                <button id="settings-btn" class="nav-btn settings">‚öôÔ∏è</button>
            </nav>
        </header>

        <!-- ‰∏ªË¶ÅÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- Êó•ËÆ∞È°µÈù¢ -->
            <div id="diary-page" class="page active">
                <!-- Êó•ÊúüÂØºËà™ÂíåÁÉ≠ÂäõÂõæÂÆπÂô® -->
                <div class="date-nav-container">
                    <!-- Êó•ÊúüÂØºËà™ -->
                    <div class="date-nav">
                        <button id="prev-day" class="date-btn">‚óÄ</button>
                        <input type="date" id="current-date" class="date-input">
                        <button id="next-day" class="date-btn">‚ñ∂</button>
                        <button id="toggle-heatmap" class="heatmap-toggle-btn" title="Â±ïÂºÄÊó•ËÆ∞ÁÉ≠ÂäõÂõæ">
                            <span class="toggle-text">Â±ïÂºÄÁÉ≠ÂäõÂõæ</span>
                            <span class="toggle-arrow">‚óÄ</span>
                        </button>
                    </div>

                    <!-- Êó•ËÆ∞ÁÉ≠ÂäõÂõæ -->
                    <div id="diary-heatmap" class="diary-heatmap hidden">
                        <div class="heatmap-header">
                            <h3>Êó•ËÆ∞ËÆ∞ÂΩïÁÉ≠ÂäõÂõæ</h3>
                            <div class="heatmap-legend">
                                <span class="legend-label">Â∞ë</span>
                                <div class="legend-colors">
                                    <div class="legend-color" data-level="0"></div>
                                    <div class="legend-color" data-level="1"></div>
                                    <div class="legend-color" data-level="2"></div>
                                    <div class="legend-color" data-level="3"></div>
                                    <div class="legend-color" data-level="4"></div>
                                </div>
                                <span class="legend-label">Â§ö</span>
                            </div>
                        </div>
                        <div class="heatmap-container">
                            <div class="heatmap-wrapper">
                                <div class="heatmap-months" id="heatmap-months">
                                    <!-- Êúà‰ªΩÊ†áÁ≠æÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                </div>
                                <div class="heatmap-content">
                                    <div class="heatmap-weekdays">
                                        <div class="weekday-label">‰∏Ä</div>
                                        <div class="weekday-label">‰∫å</div>
                                        <div class="weekday-label">‰∏â</div>
                                        <div class="weekday-label">Âõõ</div>
                                        <div class="weekday-label">‰∫î</div>
                                        <div class="weekday-label">ÂÖ≠</div>
                                        <div class="weekday-label">Êó•</div>
                                    </div>
                                    <div id="heatmap-grid" class="heatmap-grid">
                                        <!-- ÁÉ≠ÂäõÂõæÊ†ºÂ≠êÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÁîüÊàê -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Êó•ËÆ∞ÂÜÖÂÆπ -->
                <div class="diary-content">
                    <!-- ‰ªäÊó•Â§ß‰∫ã -->
                    <section class="major-events">
                        <div class="section-header">
                            <h2>‰ªäÊó•Â§ß‰∫ã</h2>
                            <div class="section-actions">
                                <button id="add-major-event" class="add-btn-compact">+ Ê∑ªÂä†</button>
                                <button id="inherit-yesterday" class="inherit-btn">ÁªßÊâøÊò®Êó•</button>
                            </div>
                        </div>
                        <div class="events-list" id="major-events-list">
                            <!-- Â§ß‰∫ãÈ°πÁõÆÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∑ªÂä† -->
                        </div>
                    </section>

                    <!-- ‰∏≠Èó¥‰∏§Ê†è -->
                    <div class="middle-section">
                        <!-- ‰ªäÊó•todo -->
                        <section class="todo-section">
                            <div class="section-header">
                                <h2>‰ªäÊó•ÂæÖÂäû</h2>
                                <button id="add-todo" class="add-btn-compact">+ Ê∑ªÂä†</button>
                            </div>
                            <div class="todo-list" id="todo-list">
                                <!-- todoÈ°πÁõÆÂ∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∑ªÂä† -->
                            </div>
                        </section>

                        <!-- ÂÆåÊàê‰∫ã‰ª∂ -->
                        <section class="completed-section">
                            <div class="section-header">
                                <h2>ÂÆåÊàê‰∫ã‰ª∂</h2>
                                <button id="add-completed" class="add-btn-compact">+ Ê∑ªÂä†</button>
                            </div>
                            <div class="completed-list" id="completed-list">
                                <!-- ÂÆåÊàê‰∫ã‰ª∂Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∑ªÂä† -->
                            </div>
                        </section>
                    </div>

                    <!-- ‰ªäÊó•ÊÑüÊÇü -->
                    <section class="reflection-section">
                        <h2>‰ªäÊó•ÊÑüÊÇü</h2>
                        <textarea id="reflection-text" class="reflection-textarea" placeholder="ËÆ∞ÂΩï‰ªäÂ§©ÁöÑÊÑüÊÇü..."></textarea>
                    </section>
                </div>

                <!-- Êìç‰ΩúÊåâÈíÆ -->
                <div class="action-buttons">
                    <button id="export-diary-range" class="action-btn">ÂØºÂá∫Êó•ËÆ∞</button>
                    <button id="clear-diary-range" class="action-btn danger">Ê∏ÖÁ©∫Êó•ËÆ∞</button>
                </div>
            </div>

            <!-- ËÆ°ÂàíÈ°µÈù¢ -->
            <div id="plan-page" class="page">
                <div class="plan-header">
                    <h2>ÊàëÁöÑËÆ°Âàí</h2>
                    <button id="add-plan" class="add-btn">+ Êñ∞Âª∫ËÆ°Âàí</button>
                </div>
                <div class="plan-list" id="plan-list">
                    <!-- ËÆ°ÂàíÂàóË°®Â∞ÜÂú®ËøôÈáåÂä®ÊÄÅÊ∑ªÂä† -->
                </div>
            </div>

            <!-- ËÆ°ÂàíÁºñËæëÈ°µÈù¢ -->
            <div id="plan-edit-page" class="page">
                <div class="plan-edit-header">
                    <button id="back-to-plans" class="back-btn">‚Üê ËøîÂõû</button>
                    <h2 id="plan-edit-title">ÁºñËæëËÆ°Âàí</h2>
                </div>
                <div class="plan-edit-form">
                    <input type="text" id="plan-name" class="plan-input" placeholder="ËÆ°ÂàíÂêçÁß∞">
                    <div class="tasks-section">
                        <div class="section-header">
                            <h3>Â∑•‰ΩúÈ°π</h3>
                            <button id="add-task" class="add-btn-compact">+ Ê∑ªÂä†</button>
                        </div>
                        <div class="common-tasks-section">
                            <button id="show-common-tasks" class="common-tasks-btn">üìÅ Â∏∏Áî®Â∑•‰ΩúÈ°π</button>
                            <div id="common-tasks-dropdown" class="common-tasks-dropdown">
                                <div class="common-tasks-header">
                                    <span>ÈÄâÊã©Â∏∏Áî®Â∑•‰ΩúÈ°π</span>
                                    <button id="manage-common-tasks" class="manage-btn">ÁÆ°ÁêÜ</button>
                                </div>
                                <div id="common-tasks-list" class="common-tasks-list">
                                    <!-- Â∏∏Áî®Â∑•‰ΩúÈ°πÂàóË°® -->
                                </div>
                            </div>
                        </div>
                        <div class="tasks-list" id="tasks-list">
                            <!-- Â∑•‰ΩúÈ°πÂàóË°® -->
                        </div>
                    </div>
                    <div class="plan-actions">
                        <button id="save-plan" class="action-btn">‰øùÂ≠òËÆ°Âàí</button>
                        <button id="delete-plan" class="action-btn danger">Âà†Èô§ËÆ°Âàí</button>
                    </div>
                </div>
            </div>

            <!-- ËÆ°ÂàíÊâßË°åÈ°µÈù¢ -->
            <div id="plan-execute-page" class="page">
                <div class="execute-header">
                    <button id="back-to-plans-exec" class="back-btn">‚Üê ËøîÂõû</button>
                    <h2 id="execute-plan-title">ÊâßË°åËÆ°Âàí</h2>
                    <div class="timer" id="timer">00:00:00</div>
                </div>
                <div class="execute-content">
                    <div class="execute-tasks" id="execute-tasks">
                        <!-- ÊâßË°å‰∏≠ÁöÑ‰ªªÂä°ÂàóË°® -->
                    </div>
                    <div class="execute-actions">
                        <button id="pause-plan" class="action-btn">ÊöÇÂÅú</button>
                        <button id="stop-plan" class="action-btn danger">Âº∫Âà∂ÁªàÊ≠¢</button>
                    </div>
                </div>
            </div>

            <!-- ÊñáÊ°£Êü•ÁúãÈ°µÈù¢ -->
            <div id="doc-view-page" class="page">
                <div class="doc-header">
                    <button id="back-to-main" class="back-btn">‚Üê ËøîÂõû</button>
                    <h2 id="doc-title">ÊñáÊ°£Êü•Áúã</h2>
                </div>
                <div class="doc-content">
                    <div id="doc-body" class="markdown-content">
                        <!-- ÊñáÊ°£ÂÜÖÂÆπÂ∞ÜÂú®ËøôÈáåÊòæÁ§∫ -->
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Â∫ïÈÉ®ÊñáÊ°£ÈìæÊé• -->
    <footer class="app-footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="#" id="product-doc-link" class="footer-link" onclick="appController.showDocument('docs/product-spec.md', '‰∫ßÂìÅÊñáÊ°£'); return false;">üìã ‰∫ßÂìÅÊñáÊ°£</a>
                <a href="#" id="prompt-doc-link" class="footer-link" onclick="appController.showDocument('docs/generation-prompt.md', 'ÁîüÊàêÊåá‰ª§'); return false;">üîß ÁîüÊàêÊåá‰ª§</a>
                <a href="#" id="dev-log-link" class="footer-link" onclick="appController.showDocument('docs/development-log.md', 'ÂºÄÂèëÊó•Âøó'); return false;">üìö ÂºÄÂèëÊó•Âøó</a>
                <a href="#" id="user-manual-link" class="footer-link" onclick="appController.showDocument('README.md', 'Áî®Êà∑ÊâãÂÜå'); return false;">üìñ ‰ΩøÁî®ËØ¥Êòé</a>
            </div>
            <div class="footer-info">
                <span class="footer-version">v1.0.12</span>
                <span class="footer-separator">‚Ä¢</span>
                <span class="footer-date">2025-08-25</span>
            </div>
        </div>
    </footer>

    <!-- Ê®°ÊÄÅÊ°Ü -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <!-- Á°ÆËÆ§ÂØπËØùÊ°Ü -->
    <div id="confirm-dialog" class="modal">
        <div class="modal-content confirm-content">
            <h3 id="confirm-title">Á°ÆËÆ§Êìç‰Ωú</h3>
            <p id="confirm-message"></p>
            <div class="confirm-actions">
                <button id="confirm-yes" class="action-btn">Á°ÆËÆ§</button>
                <button id="confirm-no" class="action-btn">ÂèñÊ∂à</button>
            </div>
        </div>
    </div>

    <!-- Â∏∏Áî®Â∑•‰ΩúÈ°πÁÆ°ÁêÜÊ®°ÊÄÅÊ°Ü -->
    <div id="common-tasks-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>ÁÆ°ÁêÜÂ∏∏Áî®Â∑•‰ΩúÈ°π</h3>
            <div class="common-tasks-form">
                <div class="add-common-task">
                    <input type="text" id="new-common-task" placeholder="ËæìÂÖ•Â∏∏Áî®Â∑•‰ΩúÈ°π..." class="common-task-input">
                    <button id="add-common-task" class="action-btn">Ê∑ªÂä†</button>
                </div>
                <div id="manage-common-tasks-list" class="manage-common-tasks-list">
                    <!-- ÁÆ°ÁêÜÂ∏∏Áî®Â∑•‰ΩúÈ°πÂàóË°® -->
                </div>
            </div>
        </div>
    </div>

    <!-- Êó•ËÆ∞ÂØºÂá∫Ê®°ÊÄÅÊ°Ü -->
    <div id="diary-export-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>ÂØºÂá∫Êó•ËÆ∞</h3>
            <div class="export-form">
                <div class="date-range">
                    <div class="date-range-row">
                        <label>ÂºÄÂßãÊó•ÊúüÔºö</label>
                        <input type="date" id="export-start-date" class="date-input">
                    </div>
                    <div class="date-range-row">
                        <label>ÁªìÊùüÊó•ÊúüÔºö</label>
                        <input type="date" id="export-end-date" class="date-input">
                    </div>
                </div>
                <div class="export-options">
                    <button id="export-current-day" class="action-btn">ÂØºÂá∫ÂΩìÂ§©</button>
                    <button id="export-all-diaries" class="action-btn">ÂØºÂá∫ÊâÄÊúâÊó•ËÆ∞</button>
                    <button id="export-date-range" class="action-btn">ÂØºÂá∫ÊåáÂÆöËåÉÂõ¥</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Êó•ËÆ∞Ê∏ÖÁ©∫Ê®°ÊÄÅÊ°Ü -->
    <div id="diary-clear-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3>Ê∏ÖÁ©∫Êó•ËÆ∞</h3>
            <div class="clear-form">
                <div class="date-range">
                    <div class="date-range-row">
                        <label>ÂºÄÂßãÊó•ÊúüÔºö</label>
                        <input type="date" id="clear-start-date" class="date-input">
                    </div>
                    <div class="date-range-row">
                        <label>ÁªìÊùüÊó•ÊúüÔºö</label>
                        <input type="date" id="clear-end-date" class="date-input">
                    </div>
                </div>
                <div class="clear-options">
                    <button id="clear-current-day" class="action-btn danger">Ê∏ÖÁ©∫ÂΩìÂ§©</button>
                    <button id="clear-all-diaries" class="action-btn danger">Ê∏ÖÁ©∫ÊâÄÊúâÊó•ËÆ∞</button>
                    <button id="clear-date-range" class="action-btn danger">Ê∏ÖÁ©∫ÊåáÂÆöËåÉÂõ¥</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/utils.js?v=1.0.12"></script>
    <script src="js/storage.js?v=1.0.12"></script>
    <script src="js/diary.js?v=1.0.12"></script>
    <script src="js/plans.js?v=1.0.12"></script>
    <script src="js/app.js?v=1.0.12"></script>
</body>
</html>