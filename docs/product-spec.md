# 日常记录应用 - 产品文档

**版本**: v1.0.12  
**最后更新**: 2025-08-25  
**文档类型**: 产品规格文档 (PRD)

---

## 📋 产品概述

### 产品定位
日常记录应用是一款基于Web的个人生活管理工具，专注于日记记录和计划管理两大核心功能。采用奶油简约风设计，为用户提供温暖、舒适的记录体验。

### 目标用户
- **主要用户**: 有日记记录习惯的个人用户
- **次要用户**: 需要计划管理和任务跟踪的用户
- **年龄段**: 18-45岁
- **使用场景**: 个人生活记录、工作计划管理、学习进度跟踪

### 产品价值
- 帮助用户养成记录习惯，提升生活质量
- 提供结构化的记录方式，提高记录效率
- 通过计划功能帮助用户更好地管理时间
- 数据本地存储，保护用户隐私

---

## 🎯 功能模块详细设计

### 1. 日记功能模块

#### 1.1 核心布局设计
**四区域结构设计理念**:
- **今日大事** (顶部): 突出重要性，便于快速浏览
- **今日待办** (左中): 结构化任务管理
- **完成事项** (右中): 成就感展示区域
- **今日感悟** (底部): 深度思考空间

#### 1.2 功能详细规格

| 功能点 | 优先级 | 详细说明 | 技术实现 |
|--------|--------|----------|----------|
| 日期导航 | P0 | 支持日期选择器、前后导航按钮 | Date API + UI组件 |
| 四区域记录 | P0 | 独立的数据结构和UI渲染 | 模块化组件设计 |
| GitHub风格热力图 | P0 | 365天记录可视化，5级密度显示 | 类似GitHub贡献图设计 |
| 热力图展开/折叠 | P1 | 可展开查看365天热力图 | 动态组件显示/隐藏 |
| 格子点击跳转 | P1 | 点击热力图格子跳转日期 | 事件绑定 + 日期跳转 |
| 悬停提示 | P1 | 显示日期和记录统计信息 | Tooltip组件 |
| 自动保存 | P0 | 1秒延迟防抖保存 | LocalStorage + 防抖函数 |
| 事项关联 | P1 | 待办关联大事、完成关联待办 | 数据引用机制 |
| 继承昨日 | P1 | 一键复制昨日大事到今日 | 数据克隆功能 |
| 事件详情窗口 | P1 | 点击大事显示详情，包含创建时间和相关链接 | 模态框 + 数据关联 |
| 相关链接管理 | P2 | 添加、编辑、删除外部链接 | URL验证 + 新窗口打开 |
| 链接测试功能 | P2 | 保存前测试链接有效性 | HTTP请求测试 |
| 导出功能 | P2 | Markdown格式导出 | 文件下载API |

#### 1.3 数据结构设计
```javascript
DiaryEntry = {
  majorEvents: [
    { 
      id, 
      text, 
      createdAt,
      relatedLinks: [        // v1.0.11新增
        { url, title }
      ]
    }
  ],
  todos: [
    { id, text, completed, relatedEventId, createdAt }
  ],
  completed: [
    { id, text, relatedTodoId, completedAt }
  ],
  reflection: string,
  createdAt: timestamp,
  updatedAt: timestamp
}
```

### 2. 计划功能模块

#### 2.1 功能流程设计
```
创建计划 → 添加任务 → 标记必需项 → 开始执行 → 完成任务 → 查看统计
```

#### 2.2 功能详细规格

| 功能点 | 优先级 | 详细说明 | 业务规则 |
|--------|--------|----------|----------|
| 计划CRUD | P0 | 创建、读取、更新、删除计划 | 删除需二次确认 |
| 任务管理 | P0 | 添加、编辑、删除任务项 | 支持必需标记 |
| 每日独立执行 | P0 | 计划每天可独立执行，互不影响 | 独立的执行记录 |
| 常用工作项 | P1 | 预设常用任务，快捷添加 | 支持管理和选择 |
| 进度跟踪 | P1 | 任务完成进度显示 | 百分比 + 进度条 |
| 强制终止 | P1 | 支持中途停止计划 | 必需项提醒 |
| 完成庆祝 | P2 | 计划完成后的统计展示 | 模态框展示 |

#### 2.3 状态流转图
```
draft → active → completed
  ↓       ↓
  ↓    stopped
  ↓_______↗
```

### 3. UI/UX设计规范

#### 3.1 设计系统
**色彩规范**:
- 主色调: 奶油白 (#fefef9)
- 辅助色: 奶油米色 (#f5f2e8)
- 强调色: 暖棕色 (#b5a082)
- 警示色: 暖橙色 (#e8ad8c)
- 深色主题: 支持深色/浅色主题切换，使用CSS Variables实现

**字体规范**:
- 系统字体栈: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC'
- 字号体系: 12px-32px，遵循 1.2 倍数比例

**间距规范**:
- 基础间距单位: 8px
- 间距级别: xs(4px), sm(8px), md(16px), lg(24px), xl(32px)

#### 3.2 响应式设计规范
- **桌面端** (>1024px): 完整功能展示
- **平板端** (768px-1024px): 适配调整
- **手机端** (<768px): 单栏布局，优化交互

#### 3.3 交互设计原则
1. **即时反馈**: 所有操作提供视觉反馈
2. **错误预防**: 重要操作需要确认
3. **一致性**: 相同功能使用相同交互模式
4. **可访问性**: 支持键盘导航和屏幕阅读器

---

## 📊 产品指标体系

### 1. 核心指标
- **用户留存率**: 日活/周活/月活用户比例
- **功能使用率**: 各功能模块的使用频次
- **数据完整度**: 用户记录内容的丰富程度

### 2. 业务指标
- **记录频次**: 用户平均记录天数/周
- **计划完成率**: 计划执行成功比例
- **导出使用率**: 数据导出功能使用频次

### 3. 技术指标
- **页面加载时间**: <2秒
- **存储使用量**: 平均每用户存储大小
- **错误率**: JavaScript错误发生频次

---

## 🗓️ 版本迭代规划

### v1.0.11 (大事详情与UI优化版本 - 已实现)
**今日大事增强**:
- ✅ 事件详情窗口: 点击任何大事项目打开详情模态框
- ✅ 创建时间记录: 显示事件首次创建的时间戳，格式化为易读形式
- ✅ 相关链接功能: 支持添加、编辑、删除与事件相关的外部链接
- ✅ 链接测试功能: 保存前测试链接的有效性，确保链接可访问
- ✅ 新窗口打开: 点击链接在新浏览器窗口中打开，不影响当前会话

**UI/UX体验优化**:
- ✅ 热力图布局优化: 热力图在日期选择器容器中展开，布局更统一协调
- ✅ 完成事件配色更新: 更换完成事件底色为橙色，与整体设计风格统一
- ✅ 成功指示器优化: 拖拽成功、成功消息等统一使用橙色主题
- ✅ 模态框系统扩展: 增强事件详情展示能力，支持复杂内容管理

**数据管理增强**:
- ✅ 时间戳管理: 完善事件生命周期追踪，记录创建时间
- ✅ 外链集成: 增强信息关联和扩展能力，支持多个链接管理
- ✅ 数据结构优化: 扩展majorEvents数据结构，支持relatedLinks字段

**文档体系完善**:
- ✅ 全面更新开发日志: 记录v1.0.11版本的所有变更和改进
- ✅ 创建用户手册: 新增详细的用户使用指南，包含新功能说明
- ✅ 更新指令文档: 添加新功能的实现指导和技术要求
- ✅ 产品文档维护: 完善产品功能描述和数据结构设计

### v1.0.10 (用户体验全面升级版本 - 已实现)
**热力图功能增强**:
- ✅ GitHub风格热力图优化: 添加月份和星期坐标标记
- ✅ 热力图展开/折叠动效: 使用箭头图标切换，更直观的交互
- ✅ 5级记录密度可视化: 通过颜色深浅展示记录丰富程度
- ✅ 格子点击跳转功能: 点击任意格子快速跳转到对应日期
- ✅ 悬停提示信息优化: 显示具体日期和详细记录统计

**界面交互全面优化**:
- ✅ 删除所有复制功能: 简化界面，减少不必要操作
- ✅ 智能文本处理: 长文本自动截断，支持展开查看和工具提示
- ✅ 按钮布局重新设计: 添加按钮移至右上角，界面更整洁
- ✅ 容器等宽优化: 修复待办和完成事项宽度不等分问题
- ✅ 事件项智能显示: 超过50字符自动截断，点击展开全文

**用户体验升级**:
- ✅ 自动焦点管理: 添加新事项后自动定位到输入框
- ✅ 文本提示系统: 鼠标悬停显示完整内容的工具提示
- ✅ 界面清理: 移除冗余功能，专注核心记录体验
- ✅ 响应式优化: 手机端热力图和文本处理适配

### v1.0.8 (功能增强版本 - 已实现)
**日记导出增强**:
- ✅ 支持选择导出日期范围（从某天到某天）
- ✅ 默认当天导出，也可快捷选择导出所有日记
- ✅ 支持选择清空日期范围，与计划功能独立

**UI/UX优化**:
- ✅ 继承昨日按钮移动到今日大事区域，更符合逻辑
- ✅ 实现深色和浅色主题切换功能
- ✅ 设置窗口布局优化，拉宽窗口让数据统计一行显示
- ✅ 移除设备模式切换功能，简化设置面板

**功能体验优化**:
- ✅ 日记导出和清空功能与计划功能完全独立
- ✅ 改进导出内容的格式化和结构
- ✅ 优化模态框的交互体验

### v1.0.9 (GitHub风格热力图版本 - 已实现)
**日记可视化增强**:
- ✅ GitHub风格热力图: 类似GitHub贡献图的365天记录展示
- ✅ 5级记录密度显示: 无记录/少量/中等/丰富/详细记录
- ✅ 热力图展开/折叠功能: 通过📅按钮控制显示状态
- ✅ 格子点击跳转: 点击任意格子跳转到对应日期
- ✅ 悬停提示信息: 显示具体日期和记录统计

**UI/UX体验优化**:
- ✅ 奶油简约风热力图样式: 符合整体设计风格
- ✅ 移动端响应式适配: 手机端热力图网格优化
- ✅ 日期导航区域优化: 添加热力图切换按钮
- ✅ 实时数据更新: 保存日记时自动更新热力图

### v1.0.8 (计划系统增强版本 - 已实现)
**日期选择器优化**:
- ✅ 修复日期切换异常问题
- ✅ 优化手机模式下的日期选择器布局
- ✅ 添加日期验证和错误处理

**计划系统升级**:
- ✅ 实现计划每日独立执行功能
- ✅ 计划每天都可重新开始，执行情况独立记录
- ✅ 每日执行状态的显示和管理

**常用工作项功能**:
- ✅ 常用工作项管理系统
- ✅ 快捷添加常用工作项到计划
- ✅ 常用工作项的增删改功能
- ✅ 智能下拉选择器

**交互体验优化**:
- ✅ 手机模式下的日期导航优化
- ✅ 常用工作项下拉框的响应式设计
- ✅ 更好的触摸交互体验

### v1.2 (短期规划 - 1个月)
**拖拽排序功能**:
- [ ] 事件项拖拽排序: 支持拖拽调整事件顺序
- [ ] 可视化拖拽提示: 拖拽过程中的视觉反馈
- [ ] 排序状态保存: 自动保存用户调整的顺序

**高级文本处理**:
- [ ] 富文本编辑: 支持格式化文本输入
- [ ] Markdown支持: 基础Markdown语法支持
- [ ] 文本模板: 预设常用的记录模板

**数据管理增强**:
**功能优化**:
- [ ] 标签系统: 为日记和计划添加标签分类
- [ ] 搜索功能: 全文搜索历史记录
- [ ] 数据统计: 个人数据分析面板
- [ ] 主题切换: 支持深色模式

**体验优化**:
- [ ] 快捷操作: 更多键盘快捷键
- [ ] 拖拽排序: 任务项拖拽重排
- [ ] 批量操作: 多选删除/编辑

### v1.2 (中期规划 - 3个月)
**新功能**:
- [ ] 模板系统: 预设的记录模板
- [ ] 提醒功能: 基于浏览器通知的提醒
- [ ] 数据同步: 云端同步功能
- [ ] 分享功能: 记录内容分享

**技术升级**:
- [ ] PWA支持: 离线使用和应用安装
- [ ] 性能优化: 大数据量下的性能优化
- [ ] 安全加强: 数据加密存储

### v2.0 (长期规划 - 6个月)
**重大更新**:
- [ ] 多用户支持: 家庭共享功能
- [ ] 插件系统: 第三方扩展支持
- [ ] AI助手: 智能记录建议
- [ ] 数据可视化: 图表化数据展示

---

## 🔧 技术架构文档

### 1. 技术选型
- **前端框架**: 原生JavaScript (模块化设计)
- **样式方案**: CSS3 + CSS Variables
- **存储方案**: LocalStorage
- **构建工具**: 无需构建工具，直接运行

### 2. 模块设计
```
App Controller (主控制器)
├── Diary Controller (日记模块)
├── Plan Controller (计划模块)
├── Storage Manager (存储管理)
└── Utility Functions (工具函数)
```

### 3. 数据流设计
```
UI交互 → Controller → Storage Manager → LocalStorage
   ↑                                            ↓
   ←────── UI更新 ←── Data Processing ←─────────┘
```

---

## 🐛 已知问题与限制

### 1. 技术限制
- **存储限制**: LocalStorage 5-10MB限制
- **同步限制**: 无法跨设备同步数据
- **兼容性**: 需要现代浏览器支持

### 2. 功能限制
- **搜索功能**: 暂不支持全文搜索
- **数据分析**: 缺少可视化统计
- **协作功能**: 暂不支持多人协作

### 3. 用户体验待优化
- **长文本输入**: 大段文字输入体验可优化
- **数据迁移**: 缺少便捷的数据迁移工具
- **离线提醒**: 暂无离线状态明确提示

---

## 📈 竞品分析

### 1. 直接竞品
**传统日记应用**:
- 优势: 专业日记功能
- 劣势: 缺少计划管理整合

**任务管理应用**:
- 优势: 强大的计划功能
- 劣势: 缺少情感记录

### 2. 我们的差异化优势
- **四区域设计**: 独特的日记结构化记录方式
- **功能整合**: 日记+计划一体化设计
- **奶油简约风**: 温暖舒适的视觉体验
- **数据私有**: 完全本地存储，保护隐私

---

## 🎯 产品运营建议

### 1. 用户引导
- **新手指引**: 创建产品导览功能
- **示例数据**: 提供样例记录帮助理解
- **使用技巧**: 定期推出使用小贴士

### 2. 用户反馈收集
- **反馈渠道**: 在应用内添加反馈入口
- **用户调研**: 定期进行用户访谈
- **数据分析**: 收集匿名使用数据

### 3. 社区建设
- **用户分享**: 鼓励用户分享使用心得
- **模板分享**: 建立记录模板分享社区
- **功能建议**: 开放功能需求征集

---

## 📝 更新日志

### v1.0.10 (2025-08-24) - 用户体验全面升级
**热力图功能增强**:
- ✅ 热力图坐标系统: 添加月份和星期标记，参考GitHub贡献图设计
- ✅ 交互优化: 使用箭头图标进行展开/折叠切换
- ✅ 视觉升级: 热力图与日期选择器整合在统一容器中
- ✅ 移动端适配: 优化小屏幕下的热力图显示效果

**界面功能优化**:
- ✅ 功能精简: 删除所有时间复制功能，专注核心记录体验
- ✅ 智能文本处理: 长文本自动截断（50字符），支持展开和工具提示
- ✅ 按钮重新设计: 添加按钮移至容器右上角，界面更整洁
- ✅ 自动焦点: 添加新事项后自动聚焦到输入框
- ✅ 布局修复: 确保待办和完成事项容器严格等宽

**用户体验提升**:
- ✅ 文本工具提示: 鼠标悬停显示完整内容的智能提示
- ✅ 展开/折叠按钮: 长文本提供便捷的展开查看功能
- ✅ 界面清理: 移除冗余功能，提升整体使用体验
- ✅ 响应式优化: 全面优化移动端的交互体验
**日记导出增强**:
- ✅ 日期范围选择导出功能
- ✅ 一键导出所有日记功能
- ✅ 清空日记范围选择功能

**主题系统**:
- ✅ 深色主题支持
- ✅ 主题切换功能完善

**界面优化**:
- ✅ 继承昨日按钮位置优化
- ✅ 设置模态框布局优化
- ✅ 移除设备模式切换功能

### v1.0.6 (2025-08-22) - 开发日志系统
**首次发布**:
- ✅ 完整的日记功能（四区域设计）
- ✅ 完整的计划功能（创建、执行、统计）
- ✅ 奶油简约风UI设计
- ✅ 响应式设计支持
- ✅ 数据本地存储
- ✅ 导入导出功能
- ✅ 键盘快捷键支持

---

*此文档将随产品迭代持续更新，请产品团队定期维护和完善。*